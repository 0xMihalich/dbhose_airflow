query_path
==========

.. py:function:: query_path()

   :return: Путь к директории с SQL-шаблонами запросов
   :rtype: str

**Описание:**

Возвращает форматируемую строку пути к SQL-файлам в директории ``queryes``.

**Формат пути:**

``<директория_модуля>/queryes/{}.sql``

**Использование:**

Загрузка SQL-шаблонов по имени:

.. code-block:: python

    template = query_path().format("copy_to")
    # → /path/to/module/queryes/copy_to.sql

**Виды SQL-шаблонов:**

SQL-шаблоны для операций с PostgreSQL/GreenPlum, используемые в модуле PGPackDumper.

attributes.sql
--------------

**Назначение:**

Получение метаданных таблицы.

**Описание:**

Агрегирует информацию о колонках таблицы (имена, типы, параметры) в JSON-массив и преобразует в бинарный формат.

**Используется в:**

``read_metadata()``

copy_from.sql
-------------

**Назначение:**

Копирование данных в таблицу.

**Описание:**

SQL команда ``COPY ... FROM STDIN`` в бинарном формате для загрузки данных в таблицу.

**Используется в:**

``CopyBuffer.copy_from()``, ``CopyBuffer.copy_between()``

copy_to.sql
-----------

**Назначение:**

Выгрузка данных из таблицы.

**Описание:**

SQL команда ``COPY ... TO STDOUT`` в бинарном формате для чтения данных из таблицы.

**Используется в:**

``CopyBuffer.copy_to()``

dbname.sql
----------

**Назначение:**

Определение типа СУБД.

**Описание:**

Определяет, является ли СУБД GreenPlum (по наличию схемы ``gp_toolkit``) или PostgreSQL.

**Используется в:**

Инициализация ``PGPackDumper``

gpversion.sql
-------------

**Назначение:**

Получение версии GreenPlum.

**Описание:**

Извлекает номер версии GreenPlum из строки версии СУБД.

**Используется в:**

Формирование ``self.version`` в PGPackDumper

prepare.sql
-----------

**Назначение:**

Подготовка запроса для получения метаданных.

**Описание:**

Создает временную таблицу из результатов запроса через ``PREPARE``/``EXECUTE`` для получения метадаты.

**Используется в:**

``read_metadata()`` для запросов

relkind.sql
-----------

**Назначение:**

Определение типа объекта базы данных.

**Описание:**

Получает ``relkind`` (тип объекта) для таблицы по её OID.

**Используется в:**

``CopyBuffer.copy_to()`` для проверки доступности объекта
